{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nicol\\xE1s\\\\fe3-final\\\\src\\\\Components\\\\utils\\\\global.context.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useMemo, useReducer } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ContextGlobal = /*#__PURE__*/createContext();\nexport const ContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n\n  const reducer = (state, action) => {\n    switch (action.type) {\n      case \"SWITCH_THEME\":\n        return { ...state,\n          theme: state.theme === 'light' ? 'dark' : 'light'\n        };\n\n      case \"ADD_FAVORITE\":\n        return { ...state,\n          favs: [...state.favs, action.payload]\n        };\n\n      case \"REMOVE_FAVORITE\":\n        return { ...state,\n          favs: state.favs.filter(d => d.id !== action.payload)\n        };\n\n      default:\n        return state;\n    }\n  };\n\n  const loadDentists = () => {\n    const localDentists = localStorage.getItem(\"dentists\");\n\n    if (!localDentists) {\n      const getData = async () => {\n        const response = await fetch('https://jsonplaceholder.typicode.com/users');\n        const parsedResponse = await response.json();\n        localStorage.setItem(\"dentists\", JSON.stringify(parsedResponse));\n        return parsedResponse;\n      };\n\n      return getData();\n    } else {\n      return JSON.parse(localDentists);\n    }\n  };\n\n  const initialState = {\n    theme: \"dark\",\n    dentists: loadDentists(),\n    favs: JSON.parse(localStorage.getItem(\"favorite-dentists\")) || []\n  };\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value = useMemo(() => ({\n    state,\n    dispatch\n  }), [state]);\n  useEffect(() => {\n    localStorage.setItem(\"favorite-dentists\", JSON.stringify(state.favs));\n  }, [state.favs]);\n  useEffect(() => {\n    localStorage.setItem(\"dentists\", JSON.stringify(state.dentists));\n  }, [state.dentists]);\n  return /*#__PURE__*/_jsxDEV(ContextGlobal.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 13\n  }, this);\n};\n\n_s(ContextProvider, \"YGQOKLwa9OxTCEfWaUWmCQaFwfI=\");\n\n_c = ContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContextProvider\");","map":{"version":3,"names":["createContext","useEffect","useMemo","useReducer","ContextGlobal","ContextProvider","children","reducer","state","action","type","theme","favs","payload","filter","d","id","loadDentists","localDentists","localStorage","getItem","getData","response","fetch","parsedResponse","json","setItem","JSON","stringify","parse","initialState","dentists","dispatch","value"],"sources":["C:/Users/NicolÃ¡s/fe3-final/src/Components/utils/global.context.jsx"],"sourcesContent":["import {createContext, useEffect, useMemo, useReducer} from \"react\";\r\nexport const ContextGlobal = createContext();\r\n\r\nexport const ContextProvider = ({children}) => {\r\n\r\n    const reducer = (state, action) => {\r\n\r\n        switch (action.type) {\r\n            case \"SWITCH_THEME\":\r\n                return {\r\n                    ...state,\r\n                    theme: state.theme === 'light' ? 'dark' : 'light'\r\n                };\r\n            case \"ADD_FAVORITE\":\r\n                return {\r\n                    ...state,\r\n                    favs: [...state.favs, action.payload]\r\n                };\r\n            case \"REMOVE_FAVORITE\":\r\n                return {\r\n                    ...state,\r\n                    favs: state.favs.filter(d => d.id !== action.payload)\r\n                };\r\n            default:\r\n                return state;\r\n        }\r\n    };\r\n\r\n    const loadDentists = () => {\r\n        const localDentists = localStorage.getItem(\"dentists\");\r\n        if (!localDentists) {\r\n            const getData = async () => {\r\n                const response = await fetch('https://jsonplaceholder.typicode.com/users');\r\n                const parsedResponse = await response.json();\r\n                localStorage.setItem(\"dentists\", JSON.stringify(parsedResponse));\r\n                return parsedResponse;\r\n            }\r\n            return getData();\r\n        } else {\r\n            return JSON.parse(localDentists);\r\n        }\r\n    }\r\n\r\n\r\n    const initialState = {\r\n        theme: \"dark\",\r\n        dentists: loadDentists(),\r\n        favs: JSON.parse(localStorage.getItem(\"favorite-dentists\")) || [],\r\n    }\r\n\r\n    const [state, dispatch] = useReducer(reducer, initialState);\r\n    const value = useMemo(() => ({ state, dispatch }), [state]);\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(\"favorite-dentists\", JSON.stringify(state.favs))\r\n    }, [state.favs])\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(\"dentists\", JSON.stringify(state.dentists))\r\n    }, [state.dentists])\r\n\r\n    return (<ContextGlobal.Provider value={value}>{children}</ContextGlobal.Provider>);\r\n}"],"mappings":";;;AAAA,SAAQA,aAAR,EAAuBC,SAAvB,EAAkCC,OAAlC,EAA2CC,UAA3C,QAA4D,OAA5D;;AACA,OAAO,MAAMC,aAAa,gBAAGJ,aAAa,EAAnC;AAEP,OAAO,MAAMK,eAAe,GAAG,QAAgB;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;;EAE3C,MAAMC,OAAO,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;IAE/B,QAAQA,MAAM,CAACC,IAAf;MACI,KAAK,cAAL;QACI,OAAO,EACH,GAAGF,KADA;UAEHG,KAAK,EAAEH,KAAK,CAACG,KAAN,KAAgB,OAAhB,GAA0B,MAA1B,GAAmC;QAFvC,CAAP;;MAIJ,KAAK,cAAL;QACI,OAAO,EACH,GAAGH,KADA;UAEHI,IAAI,EAAE,CAAC,GAAGJ,KAAK,CAACI,IAAV,EAAgBH,MAAM,CAACI,OAAvB;QAFH,CAAP;;MAIJ,KAAK,iBAAL;QACI,OAAO,EACH,GAAGL,KADA;UAEHI,IAAI,EAAEJ,KAAK,CAACI,IAAN,CAAWE,MAAX,CAAkBC,CAAC,IAAIA,CAAC,CAACC,EAAF,KAASP,MAAM,CAACI,OAAvC;QAFH,CAAP;;MAIJ;QACI,OAAOL,KAAP;IAjBR;EAmBH,CArBD;;EAuBA,MAAMS,YAAY,GAAG,MAAM;IACvB,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAtB;;IACA,IAAI,CAACF,aAAL,EAAoB;MAChB,MAAMG,OAAO,GAAG,YAAY;QACxB,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,4CAAD,CAA5B;QACA,MAAMC,cAAc,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA7B;QACAN,YAAY,CAACO,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAeJ,cAAf,CAAjC;QACA,OAAOA,cAAP;MACH,CALD;;MAMA,OAAOH,OAAO,EAAd;IACH,CARD,MAQO;MACH,OAAOM,IAAI,CAACE,KAAL,CAAWX,aAAX,CAAP;IACH;EACJ,CAbD;;EAgBA,MAAMY,YAAY,GAAG;IACjBnB,KAAK,EAAE,MADU;IAEjBoB,QAAQ,EAAEd,YAAY,EAFL;IAGjBL,IAAI,EAAEe,IAAI,CAACE,KAAL,CAAWV,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAX,KAAyD;EAH9C,CAArB;EAMA,MAAM,CAACZ,KAAD,EAAQwB,QAAR,IAAoB7B,UAAU,CAACI,OAAD,EAAUuB,YAAV,CAApC;EACA,MAAMG,KAAK,GAAG/B,OAAO,CAAC,OAAO;IAAEM,KAAF;IAASwB;EAAT,CAAP,CAAD,EAA8B,CAACxB,KAAD,CAA9B,CAArB;EAEAP,SAAS,CAAC,MAAM;IACZkB,YAAY,CAACO,OAAb,CAAqB,mBAArB,EAA0CC,IAAI,CAACC,SAAL,CAAepB,KAAK,CAACI,IAArB,CAA1C;EACH,CAFQ,EAEN,CAACJ,KAAK,CAACI,IAAP,CAFM,CAAT;EAIAX,SAAS,CAAC,MAAM;IACZkB,YAAY,CAACO,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAepB,KAAK,CAACuB,QAArB,CAAjC;EACH,CAFQ,EAEN,CAACvB,KAAK,CAACuB,QAAP,CAFM,CAAT;EAIA,oBAAQ,QAAC,aAAD,CAAe,QAAf;IAAwB,KAAK,EAAEE,KAA/B;IAAA,UAAuC3B;EAAvC;IAAA;IAAA;IAAA;EAAA,QAAR;AACH,CA3DM;;GAAMD,e;;KAAAA,e"},"metadata":{},"sourceType":"module"}